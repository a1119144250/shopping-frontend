<!--pages/product-detail/product-detail.wxml-->
<view class="container">
  <!-- 商品图片 -->
  <view class="product-images">
    <swiper class="image-swiper" indicator-dots="{{true}}" autoplay="{{false}}">
      <block wx:for="{{product.images || [product.image]}}" wx:key="index">
        <swiper-item>
          <image class="product-image" src="{{item}}" mode="aspectFill" bindtap="onImageTap" data-url="{{item}}"></image>
        </swiper-item>
      </block>
    </swiper>
  </view>

  <!-- 商品信息 -->
  <view class="product-info">
    <view class="product-header">
      <text class="product-name">{{product.name}}</text>
      <text class="product-desc">{{product.description}}</text>
    </view>
    
    <view class="product-price">
      <text class="price-current">¥{{product.price}}</text>
      <text class="price-original" wx:if="{{product.originalPrice}}">¥{{product.originalPrice}}</text>
      <view class="discount-tag" wx:if="{{discountText}}">{{discountText}}</view>
    </view>

    <view class="product-meta">
      <view class="meta-item">
        <text class="meta-label">销量</text>
        <text class="meta-value">{{product.sales || 0}}</text>
      </view>
      <view class="meta-item">
        <text class="meta-label">评分</text>
        <text class="meta-value">{{product.rating || 0}}</text>
      </view>
    </view>
  </view>

  <!-- 商品详情 -->
  <view class="product-detail">
    <view class="detail-title">商品详情</view>
    <view class="detail-content">
      <text class="detail-text">{{product.detail || '暂无详细信息'}}</text>
    </view>
  </view>
</view>

<!-- 底部操作栏 -->
<view class="bottom-actions">
  <view class="action-left">
    <button class="action-btn" open-type="contact">
      <image class="action-icon" src="/images/service.png" mode="aspectFit"></image>
      <text>客服</text>
    </button>
    <button class="action-btn" bindtap="onCollectTap">
      <image class="action-icon" src="/images/{{isCollected ? 'heart-fill' : 'heart'}}.png" mode="aspectFit"></image>
      <text>{{isCollected ? '已收藏' : '收藏'}}</text>
    </button>
  </view>
  
  <view class="action-right">
    <button class="cart-btn" bindtap="onAddToCart">加入购物车</button>
    <button class="buy-btn" bindtap="onBuyNow">立即购买</button>
  </view>
</view>
